{"version":3,"sources":["webpack:///./src/pages/share/share.vue?1c5b","webpack:///./src/pages/share/custom.ts","webpack:///./src/utils/wx/wx-signature.ts","webpack:///./src/utils/wx/open-link.ts","webpack:///./src/pages/share/xss-filter.ts","webpack:///./src/pages/share/pvp-app.ts","webpack:///./src/pages/share/share.vue","webpack:///./src/pages/share/share.vue?a634","webpack:///./src/pages/share/share.vue?31c0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","t","on","onShare","onCustom","ref","FUNCTIONAL_ID_MAP","POPUP_CELL","POPUP_CELL_2","staticRenderFns","showStrInGame","list","length","SHARE_TYPE_LIST","filter","item","indexOf","value","map","label","join","showCustomPopup","_ref","context","callback","_ref$params","params","showPopupCell","title","closeIcon","cellList","type","open","useOpenLink","click","_ref2","popupContext","closeDialog","onGTip","changeParams","call","showTypeInGame","_ref3","showPopupCell2","button","asyncConfirm","_ref4","checkedIndexList","console","log","_objectSpread","checked","then","res","_res$context","selectList","_","index","catch","err","_err$context","resp","_ref5","_ref5$context","_ref6","_ref6$context","getWxSignaturePromise","Promise","resolve","url","referpath","encodeURIComponent","concat","window","location","protocol","host","pathname","search","uni","request","Date","now","method","success","data","JUMP_TYPES","GOODS","STORE","OTHER","CUSTOM","CUSTOM_NO_ENCODE","getMiniProgramOpenLink","appid","path","param_data","jump_type","XSSFilter","HtmlAttributeEncode","str","sStr","replace","extend","obj","ext","i","overwrite","arguments","undefined","hasOwnProperty","openURL","JSON","stringify","tmpIframe","document","createElement","setAttribute","body","appendChild","src","setTimeout","removeChild","invoke","i18n","custom","share","components","PressPopupCell","PressCell","shareParams","desc","icon","mpImageUrl","link","mpPath","pvpInvoke","created","mounted","onInitShare","methods","initShare","_this$params","openShareUI","onGetImgSize","_asyncToGenerator","_regeneratorRuntime","mark","_callee","size","wrap","_context","prev","next","urlToBase64","sent","calBase64Size","stop","component"],"mappings":"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","file":"js/chunk-2d0c9326.ad3478c4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"demo-wrap\"},[_c('demo-block',{attrs:{\"title\":_vm.t('share')}},[_c('press-cell',{attrs:{\"title\":_vm.t('share'),\"is-link\":\"\"},on:{\"click\":_vm.onShare}})],1),_c('demo-block',{attrs:{\"title\":_vm.t('custom')}},[_c('press-cell',{attrs:{\"title\":_vm.t('custom'),\"is-link\":\"\"},on:{\"click\":_vm.onCustom}})],1),_c('PressPopupCell',{ref:_vm.FUNCTIONAL_ID_MAP.POPUP_CELL,attrs:{\"id\":_vm.FUNCTIONAL_ID_MAP.POPUP_CELL,\"mode\":\"functional\"}}),_c('PressPopupCell',{ref:_vm.FUNCTIONAL_ID_MAP.POPUP_CELL_2,attrs:{\"id\":_vm.FUNCTIONAL_ID_MAP.POPUP_CELL_2,\"mode\":\"functional\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _objectSpread from \"/home/runner/work/press-ui-demo-vue2-pure/press-ui-demo-vue2-pure/node_modules/.pnpm/@babel+runtime@7.24.7/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { showPopupCell, showPopupCell2 } from 'src/packages/press-popup-cell/demo-helper/helper';\nimport { SHARE_TYPE_LIST } from 't-comm/lib/share/config';\nfunction showStrInGame(list) {\n  if (list.length === SHARE_TYPE_LIST.length) {\n    return '全部';\n  }\n  return SHARE_TYPE_LIST.filter(function (item) {\n    return (list || []).indexOf(item.value) > -1;\n  }).map(function (item) {\n    return item.label;\n  }).join(', ');\n}\nexport function showCustomPopup(_ref) {\n  var context = _ref.context,\n    callback = _ref.callback,\n    _ref$params = _ref.params,\n    params = _ref$params === void 0 ? {} : _ref$params;\n  showPopupCell({\n    context: context,\n    title: '自定义设置',\n    closeIcon: true,\n    cellList: [{\n      label: '游戏内使用 open link',\n      type: 'switch',\n      open: params.useOpenLink,\n      click: function click(_ref2) {\n        var popupContext = _ref2.context;\n        popupContext.closeDialog();\n        context.onGTip('设置成功');\n        if (typeof callback.changeParams === 'function') {\n          callback.changeParams.call(context, {\n            useOpenLink: !params.useOpenLink\n          });\n        }\n      }\n    }, {\n      label: '游戏内展示类型',\n      value: showStrInGame(params.showTypeInGame),\n      click: function click(_ref3) {\n        var popupContext = _ref3.context;\n        popupContext.closeDialog();\n        showPopupCell2({\n          context: context,\n          title: '游戏内展示类型',\n          button: '确定',\n          closeIcon: true,\n          asyncConfirm: function asyncConfirm(_ref4) {\n            var checkedIndexList = _ref4.checkedIndexList;\n            console.log('[checkedIndexList]...', checkedIndexList);\n            if (!(checkedIndexList !== null && checkedIndexList !== void 0 && checkedIndexList.length)) {\n              context.onGTip('必须选择一种类型');\n              return false;\n            }\n            return true;\n          },\n          cellList: SHARE_TYPE_LIST.map(function (item) {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              checked: params.showTypeInGame.indexOf(item.value) > -1,\n              type: 'checkbox'\n            });\n          })\n        }).then(function (res) {\n          var _res$context;\n          console.log('[showPopupCell2] res', res);\n          res === null || res === void 0 || (_res$context = res.context) === null || _res$context === void 0 || _res$context.closeDialog();\n          context.onGTip('设置成功');\n          if (typeof callback.changeParams === 'function') {\n            var selectList = SHARE_TYPE_LIST.filter(function (_, index) {\n              return (res.checkedIndexList || []).indexOf(index) > -1;\n            }).map(function (item) {\n              return item.value;\n            });\n            console.log('[selectList]: ', selectList);\n            callback.changeParams.call(context, {\n              showTypeInGame: selectList\n            });\n          }\n        }).catch(function (err) {\n          var _err$context;\n          console.log('[showPopupCell] err', err);\n          err === null || err === void 0 || (_err$context = err.context) === null || _err$context === void 0 || _err$context.closeDialog();\n        });\n      }\n    }]\n  }).then(function (resp) {\n    var _ref5 = resp || {},\n      _ref5$context = _ref5.context,\n      popupContext = _ref5$context === void 0 ? {} : _ref5$context;\n    popupContext.closeDialog();\n  }).catch(function (err) {\n    var _ref6 = err || {},\n      _ref6$context = _ref6.context,\n      popupContext = _ref6$context === void 0 ? {} : _ref6$context;\n    console.log('[showCustomPopup] err', err);\n    popupContext.closeDialog();\n  });\n}","import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nexport function getWxSignaturePromise() {\n  return new Promise(function (resolve) {\n    var url = 'https://m.igame.qq.com/pvp/share/get_share_cfg';\n    var referpath = encodeURIComponent(encodeURIComponent(\"\".concat(window.location.protocol, \"//\").concat(window.location.host).concat(window.location.pathname).concat(window.location.search)));\n    uni.request({\n      url: \"\".concat(url, \"?referpath=\").concat(referpath, \"&tstamp=\").concat(Date.now()),\n      method: 'POST',\n      success: function success(res) {\n        resolve(res.data || {});\n        console.log('[getWxSignaturePromise]', res.data);\n      }\n    });\n  });\n}","import \"core-js/modules/es.object.to-string.js\";\nvar JUMP_TYPES = {\n  GOODS: 1,\n  STORE: 2,\n  OTHER: 3,\n  CUSTOM: 4,\n  CUSTOM_NO_ENCODE: 5\n};\nexport function getMiniProgramOpenLink() {\n  return new Promise(function (resolve) {\n    var host = 'https://a.igame.qq.com';\n    uni.request({\n      method: 'POST',\n      url: \"\".concat(host, \"/merc.merccgi.accountBind.accountBind/GetMiniProgramOpenLink\"),\n      data: {\n        appid: 'wx94057b049312ffec',\n        path: '/convert-cross/views/x5m/index/index',\n        param_data: 'brandid=b1689820502&configid=gGVLomFG&inviteid=ILG6f2cfa387b694e6077f52edc0c302322&shareId=o5P-Ojory9Xh7lkreheBWF7yrFv4&adtag=share&gid=507',\n        jump_type: JUMP_TYPES.CUSTOM_NO_ENCODE\n      },\n      success: function success(res) {\n        resolve(res.data || {});\n        console.log('[getMiniProgramOpenLink]', res.data);\n      }\n    });\n  });\n}","import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\n/**\n * @module tools/XSSFilter\n * @description 特殊字符转义\n */\nvar XSSFilter = {\n  HtmlAttributeEncode: function HtmlAttributeEncode(str) {\n    return str;\n  }\n};\n/**\n * 过滤xss相关字符，包括`<`,`>`,`&`,`\"`,`'`,`=`,`\\``\n * @param {string} sStr\n * @returns 过滤后的文本\n * @example\n * import { XSSFilter } from 'src/common;\n * const res =  XSSFilter('<script>alert(\"msg\")</script>') // &lt;script&gt;alert(&quot;msg&quot;)&lt;/script&gt;\n */\n//  html属性编码：对需要出现在HTML属性里的不信任输入进行编码\n//  注意:\n//  (1)该函数不适用于属性为一个URL地址的编码.这些标记包括:a/img/frame/iframe/script/xml/embed/object...\n//  属性包括:href/src/lowsrc/dynsrc/background/...\n//  (2)该函数不适用于属性名为 style=\"[Un-trusted input]\" 的编码\nXSSFilter.HtmlAttributeEncode = function (sStr) {\n  var str = sStr;\n  str = str.replace(/&/g, '&amp;');\n  str = str.replace(/>/g, '&gt;');\n  str = str.replace(/</g, '&lt;');\n  str = str.replace(/\"/g, '&quot;');\n  str = str.replace(/'/g, '&#39;');\n  str = str.replace(/=/g, '&#61;');\n  str = str.replace(/`/g, '&#96;');\n  return str;\n};\nexport default XSSFilter;","import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport XSSFilter from './xss-filter';\nimport { initEnv } from 't-comm/lib/env/env';\n/**\n * @module tools/pvpapp\n * @description h5与王者人生app的交互\n */\nvar gSSchema = '';\nvar gSDownload = '';\n/**\n * @ignore\n * 关闭qq或者weixin webview\n * 外部引入weixin或者qq api 的js文件\n **/\nfunction closeWXQQWebView() {\n  var _initEnv = initEnv(),\n    isQQ = _initEnv.isQQ,\n    isWeixin = _initEnv.isWeixin;\n  var _window = window,\n    mqq = _window.mqq,\n    wx = _window.wx;\n  if (isQQ && typeof mqq !== 'undefined') {\n    var _mqq$ui;\n    // mqq && mqq.ui && mqq.ui.closeWebViews({mode:0,exclude:0});\n    mqq === null || mqq === void 0 || (_mqq$ui = mqq.ui) === null || _mqq$ui === void 0 || _mqq$ui.popBack();\n  } else if (isWeixin && typeof wx !== 'undefined') {\n    var _wx$closeWindow;\n    wx === null || wx === void 0 || (_wx$closeWindow = wx.closeWindow) === null || _wx$closeWindow === void 0 || _wx$closeWindow.call(wx);\n  }\n}\n/**\n * 扩展 obj 对象\n * @ignore\n * @param obj\n * @param ext\n * @param overwrite\n * @returns {*}\n */\nfunction extend(obj, ext) {\n  var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var i;\n  for (i in ext) {\n    // eslint-disable-next-line no-prototype-builtins\n    if (ext.hasOwnProperty(i) && !(i in obj) || overwrite) {\n      obj[i] = ext[i];\n    }\n  }\n  return obj;\n}\n/*\n 发送请求\n */\nfunction openURL(method, params) {\n  var url = \"igameapp://jsapi/\".concat(method, \"?p=\").concat(encodeURIComponent(JSON.stringify(params) || ''));\n  var tmpIframe = document.createElement('iframe');\n  tmpIframe.setAttribute('width', '0');\n  tmpIframe.setAttribute('height', '0');\n  tmpIframe.setAttribute('style', 'display: none;');\n  document.body.appendChild(tmpIframe);\n  tmpIframe.src = url; // 发请求\n  setTimeout(function () {\n    document.body.removeChild(tmpIframe);\n  }, 0);\n}\n/**\n * 调用app的方法\n * @param {string} method  方法名称\n * @param {string}  params  参数\n * @param {Function} callback 回调函数\n * @example\n *  // 王者人生app内跳转物品列表\n    const params = {\n      action: 0,\n      url: 'local://GiftActivity',\n      extras: {},\n    };\n    pvpapp.invoke('jumpUrl', params, '');\n */\nvar invoke = function invoke(method, params, callback) {\n  extend(params, {\n    callback: callback\n  });\n  openURL(method, params);\n};\n/*\n  微信6.5.6以上拉起第三方app\n  与tipapp中_wechatOpenApp逻辑完全相同\n */\n// eslint-disable-next-line\nfunction _wechatOpenApp() {\n  // eslint-disable-next-line\n  WeixinJSBridge.invoke('launchApplication', {\n    schemeUrl: gSSchema\n  }, function (res) {\n    console.log(res);\n    window.location.href = gSDownload; // 否则跳下载\n  });\n}\nfunction getGSSchema(url, u) {\n  var gSSchema = '';\n  if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) {\n    // //android终端或者uc浏览器\n    if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n      gSSchema = \"tencent://igame.app/open?url=\".concat(encodeURIComponent(url), \"&v=\").concat(new Date().getTime()); // 拉起H5地址\n    } else {\n      gSSchema = \"tencent://igame.app/open?url=\".concat(url, \"&v=\").concat(new Date().getTime()); // 拉起native地址\n    }\n  } else {\n    // ios也发送\n    if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n      gSSchema = \"IGame1042198954://\".concat(encodeURIComponent(url));\n    } else {\n      gSSchema = \"IGame1042198954://?\".concat(url);\n    }\n  }\n  return gSSchema;\n}\nfunction getGSDownload(downloadAdtag, directdownload) {\n  // 下载页改为APP官网首页\n  var gSDownload = 'http://igame.qq.com/pvp/download/index.php?_t=1';\n  if (downloadAdtag) {\n    gSDownload += \"&adtag=\".concat(downloadAdtag);\n  }\n  directdownload = directdownload || false;\n  if (directdownload) {\n    gSDownload += '&view=download';\n  }\n  return gSDownload;\n}\nfunction createIframe(gSSchema) {\n  // 创建iframe，呼起app schema\n  var div = document.createElement('div');\n  div.style.visibility = 'hidden';\n  div.innerHTML = \"<iframe id=\\\"schema\\\" src=\\\"\".concat(XSSFilter.HtmlAttributeEncode(gSSchema), \"\\\" scrolling=\\\"no\\\" width=\\\"1\\\" height=\\\"1\\\"></iframe>\");\n  document.body.appendChild(div);\n}\n/**\n * 拉起王者人生App，不能拉起跳转下载页\n * @param {string} url  跳转app后打开的url\n */\nvar openApp = function openApp(url, downloadAdtag, directdownload) {\n  var u = navigator.userAgent;\n  if (typeof url === 'undefined' || url == '') {\n    url = window.location.href;\n  }\n  gSSchema = getGSSchema(url, u);\n  // 下载页改为APP官网首页\n  gSDownload = getGSDownload(downloadAdtag, directdownload);\n  var checkTime = 800;\n  var wechatInfo = navigator.userAgent.match(/MicroMessenger\\/([\\d.]+)/i);\n  var version = (wechatInfo === null || wechatInfo === void 0 ? void 0 : wechatInfo[1]) && parseInt(wechatInfo[1].replace(/\\./g, '')) || 0;\n  if (!wechatInfo || version < 656) {\n    // 6.5.6 > 6.5.12\n    // 非微信环境直接scheme拉起\n    var startTime = Date.now(); // 标记呼起时间点\n    createIframe(gSSchema);\n    // 如果成功呼起，setTimeout不会立即执行\n    setTimeout(function () {\n      var delta = Date.now() - startTime; // 然后判断回来的时间戳\n      if (delta < checkTime + 100) {\n        // 如果不是我们规定的800ms，差太多，就认为是用户手动返回的, 不跳下载\n        window.location.href = gSDownload; // 否则跳下载\n      } else {\n        closeWXQQWebView();\n      }\n    }, checkTime);\n    // 注意：ios在safari进程挂起之后，js代码还会继续运行至少500ms，这里写800来保证起效。魔法数字，有待优化。\n  } else if (version > 656) {\n    // 6.5.6\n    // 微信6.5.6版本以上用weixinjsbridge拉起\n    if (typeof WeixinJSBridge === 'undefined') {\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady', _wechatOpenApp, false);\n      } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', _wechatOpenApp);\n        document.attachEvent('onWeixinJSBridgeReady', _wechatOpenApp);\n      }\n    } else {\n      _wechatOpenApp();\n    }\n  }\n};\nfunction getGSSchemaWithoutStamp(url, u) {\n  var gSSchema = '';\n  u = u || navigator.userAgent;\n  if (typeof url === 'undefined' || url == '') {\n    url = window.location.href;\n  }\n  if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) {\n    // //android终端或者uc浏览器\n    if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n      gSSchema = \"tencent://igame.app/open?url=\".concat(encodeURIComponent(url)); // 拉起H5地址\n    } else {\n      gSSchema = \"tencent://igame.app/open?\".concat(url); // 拉起native地址\n    }\n  } else {\n    // ios也发送\n    if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n      gSSchema = \"IGame1042198954://\".concat(encodeURIComponent(url));\n    } else {\n      gSSchema = \"IGame1042198954://?\".concat(url);\n    }\n  }\n  return gSSchema;\n}\n/**\n * 拉起王者人生App，不能拉起，不跳转下载页\n * @param {string} url  跳转app后打开的url\n */\nvar openAppNotDownload = function openAppNotDownload(url, downloadAdtag) {\n  var u = navigator.userAgent;\n  var gSSchema = getGSSchemaWithoutStamp(url, u);\n  // 下载页改为APP官网首页\n  // let gSDownload = '//igame.qq.com/pvp/download/index.php';\n  if (downloadAdtag) {\n    gSDownload += \"?adtag=\".concat(downloadAdtag);\n  }\n  // 创建iframe，呼起app schema\n  createIframe(gSSchema);\n  var startTime = Date.now(); // 标记呼起时间点\n  var checkTime = 1000; // 对于占用资源较大且呼起时需要跳转到具体APP内业务逻辑的情况，建议checkTime设置不小于2000ms，否则对于性能较差的Android机误判几率较高\n  // const div = document.createElement('div');\n  // div.style.visibility = 'hidden';\n  // div.innerHTML = `<iframe id=\"schema\"\n  // src=\"${XSSFilter.HtmlAttributeEncode(gSSchema)}\" scrolling=\"no\" width=\"1\" height=\"1\"></iframe>`;\n  // document.body.appendChild(div);\n  // 如果成功呼起，setTimeout不会立即执行\n  setTimeout(function () {\n    // 如果没有呼起，或者呼起后，用户主动返回，还是有可能走进这个逻辑\n    var delta = Date.now() - startTime; // 然后判断回来的时间戳\n    if (delta < checkTime + 100) {\n      // 如果不是我们规定的800ms，差太多，就认为是用户手动返回的, 不跳下载。\"100\"该值属于不稳定值，根据具体项目需要进行修改。\n      // window.location.href = window.location.href;   //否则跳下载\n      var oriurl = window.location.href;\n      if (oriurl.indexOf('?') != -1) {\n        oriurl = \"\".concat(oriurl, \"&appinstalled=0\");\n      } else {\n        oriurl = \"\".concat(oriurl, \"?appinstalled=0\");\n      }\n      window.location.href = oriurl;\n    }\n  }, checkTime);\n};\nfunction getddzoneSchema(url, u) {\n  var gSSchema = '';\n  u = u || navigator.userAgent;\n  if (typeof url === 'undefined' || url == '') {\n    url = window.location.href;\n  }\n  if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) {\n    // //android终端或者uc浏览器\n    if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n      gSSchema = \"scheme://tencent://igame.app/open?url=\".concat(encodeURIComponent(url)); // 拉起H5地址\n    } else {\n      // gSSchema = 'scheme://tencent://igame.app/open?'+url;   //拉起native地址（这个会引起选择app打开和浏览器打开的形式）\n      // gSSchema = 'pkg://com.tencent.igame?'+url;\t\t\t\t//这个会导致崩溃（已确认不支持带参数）\n      gSSchema = 'pkg://com.tencent.igame'; // 正确\n      // gSSchema   = 'scheme://igame.app/open?'+url;   \t\t\t//无效\n    }\n  } else {\n    // ios也发送\n    if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n      gSSchema = \"IGame1042198954://\".concat(encodeURIComponent(url));\n    } else {\n      gSSchema = \"IGame1042198954://?\".concat(url);\n    }\n  }\n  return gSSchema;\n}\n/**\n * 斗地主侧拉起app，不能拉起跳转下载页\n * @param {string} url  跳转app后打开的url\n */\nvar ddzopenApp = function ddzopenApp(url) {\n  // let gSSchema = '';\n  var u = navigator.userAgent;\n  var gSSchema = getddzoneSchema(url, u);\n  // if (typeof url === 'undefined' || url == '') {\n  //   url = window.location.href;\n  // }\n  // if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) { // //android终端或者uc浏览器\n  //   if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n  //     gSSchema = `scheme://tencent://igame.app/open?url=${encodeURIComponent(url)}`; // 拉起H5地址\n  //   } else {\n  //     // gSSchema = 'scheme://tencent://igame.app/open?'+url;   //拉起native地址（这个会引起选择app打开和浏览器打开的形式）\n  //     // gSSchema = 'pkg://com.tencent.igame?'+url;\t\t\t\t//这个会导致崩溃（已确认不支持带参数）\n  //     gSSchema = 'pkg://com.tencent.igame';\t\t\t\t\t// 正确\n  //     // gSSchema   = 'scheme://igame.app/open?'+url;   \t\t\t//无效\n  //   }\n  // } else { // ios也发送\n  //   if (url.indexOf('http://') > -1 || url.indexOf('https://') > -1) {\n  //     gSSchema = `IGame1042198954://${encodeURIComponent(url)}`;\n  //   } else {\n  //     gSSchema = `IGame1042198954://?${url}`;\n  //   }\n  // }\n  // 创建iframe，呼起app schema\n  // const startTime = Date.now(); // 标记呼起时间点\n  if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) {\n    // //android终端或者uc浏览器\n    confirm(gSSchema);\n  } else {\n    createIframe(gSSchema);\n    // const div = document.createElement('div');\n    // div.style.visibility = 'hidden';\n    // div.innerHTML = `<iframe id=\"schema\"\n    // src=\"${XSSFilter.HtmlAttributeEncode(gSSchema)}\" scrolling=\"no\" width=\"1\" height=\"1\"></iframe>`;\n    // document.body.appendChild(div);\n  }\n};\nexport { getGSSchema, getGSSchemaWithoutStamp, getddzoneSchema, getGSDownload, createIframe, extend, openURL, closeWXQQWebView, invoke, openApp, openAppNotDownload, ddzopenApp };\n// /*\n// 调用方式\n// igameapp.invoke(\"method\", {xx: 'xx'}, 'callback');\n// */\n// exports.invoke = invoke;\n// exports.openApp = openApp;\n// exports.ddzopenApp = ddzopenApp;\n// exports.openAppNotDownload = openAppNotDownload;","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { FUNCTIONAL_ID_MAP } from 'src/packages/press-popup-cell/demo-helper/helper';\nimport PressPopupCell from 'src/packages/press-popup-cell/press-popup-cell.vue';\nimport PressCell from 'src/packages/press-cell/press-cell.vue';\n\nimport { showCustomPopup } from './custom';\nimport { initShare, openShareUI, initShareMp, openShareUIMp } from 't-comm/lib/share/index';\nimport { getWxSignaturePromise } from '../../utils/wx/wx-signature';\nimport { getMiniProgramOpenLink } from '../../utils/wx/open-link';\nimport { calBase64Size } from 't-comm/lib/share/helper';\nimport { urlToBase64 } from 't-comm/lib/dom-to-image/dom-to-image';\nimport { invoke } from './pvp-app';\n\n\nexport default {\n  i18n: {\n    'zh-CN': {\n      custom: '自定义',\n      share: '分享',\n    },\n    'en-US': {\n      custom: 'Custom',\n      share: 'Share',\n    },\n  },\n  components: {\n    PressPopupCell,\n    PressCell,\n  },\n  data() {\n    return {\n      FUNCTIONAL_ID_MAP,\n      params: {\n        showTypeInGame: [1, 2, 3, 4],\n        useOpenLink: true,\n      },\n      shareParams: {\n        title: 'PressUI 跨端组件库',\n        desc: 'PressUI可用于uni-app项目、基于Vue的普通H5和PC项目',\n        icon: 'https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/press%2Fimg%2Fshare-sheet-wechat.png',\n        mpImageUrl: 'https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/press/img/press-ui-avatar-wx-share.png',\n\n        link: 'https://novlan1.github.io/press-ui-demo/#/pages/launch-app/launch-app?show=true',\n        mpPath: '/pages/press/protocol/protocol?a=1&b=2&c=3&d=china&e=dd123ff',\n        getWxSignaturePromise,\n        getMiniProgramOpenLink,\n        pvpInvoke: invoke,\n      },\n    };\n  },\n  created() {\n  },\n  mounted() {\n    // getMiniProgramOpenLink();\n    this.onInitShare();\n  },\n  methods: {\n    onInitShare() {\n\n      initShare(this.shareParams);\n\n\n\n\n    },\n    onCustom() {\n      showCustomPopup({\n        context: this,\n        callback: {\n          changeParams: this.changeParams,\n        },\n        params: this.params,\n      });\n    },\n    changeParams(params) {\n      this.params = {\n        ...this.params,\n        ...(params || {}),\n      };\n      const { showTypeInGame, useOpenLink } = this.params;\n      if (useOpenLink) {\n        this.shareParams.getMiniProgramOpenLink = getMiniProgramOpenLink;\n      } else {\n        delete this.shareParams.getMiniProgramOpenLink;\n      }\n      this.shareParams.showTypeInGame = showTypeInGame;\n      this.onInitShare();\n    },\n    onShare() {\n\n      openShareUI();\n\n\n\n\n    },\n    async onGetImgSize() {\n      const icon = 'https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article%2F2023%2F8%2Fqq-btn.png';\n      const data = await urlToBase64(icon);\n      const size = calBase64Size(data);\n      console.log('[onGetImgSize] size', size);\n      console.log('[onGetImgSize] data', data);\n    },\n  },\n};\n","import mod from \"-!../../../node_modules/.pnpm/babel-loader@8.3.0_zqs6ak2teu64aanbcivsfaipky/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/plugin-light@1.3.12_2laxijg42xtl6sks2r26ofb4mu/node_modules/plugin-light/lib/loader/cross-platform.js!../../../node_modules/.pnpm/plugin-light@1.3.12_2laxijg42xtl6sks2r26ofb4mu/node_modules/plugin-light/lib/loader/ifdef.js??ref--16-0!../../../node_modules/.pnpm/vue-loader@15.11.1_fpy6ydytddbcdhczwcensbnw7m/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/.pnpm/plugin-light@1.3.12_2laxijg42xtl6sks2r26ofb4mu/node_modules/plugin-light/lib/loader/cross-game-style.js!./share.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/babel-loader@8.3.0_zqs6ak2teu64aanbcivsfaipky/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/plugin-light@1.3.12_2laxijg42xtl6sks2r26ofb4mu/node_modules/plugin-light/lib/loader/cross-platform.js!../../../node_modules/.pnpm/plugin-light@1.3.12_2laxijg42xtl6sks2r26ofb4mu/node_modules/plugin-light/lib/loader/ifdef.js??ref--16-0!../../../node_modules/.pnpm/vue-loader@15.11.1_fpy6ydytddbcdhczwcensbnw7m/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/.pnpm/plugin-light@1.3.12_2laxijg42xtl6sks2r26ofb4mu/node_modules/plugin-light/lib/loader/cross-game-style.js!./share.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./share.vue?vue&type=template&id=78a051c2\"\nimport script from \"./share.vue?vue&type=script&lang=js\"\nexport * from \"./share.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_fpy6ydytddbcdhczwcensbnw7m/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}